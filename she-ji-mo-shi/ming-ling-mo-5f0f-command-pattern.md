命令模式\(Command    Pattern\):将一个请求封装为一个对象,从而让我们可用不同的请求对客户进行参数化;对请求排队或者记录请求日志,以及支持可撤销的操作。命令模式是一种对象行为型模式,其别名为动作\(Action\)模式或事务\(Transaction\)模式。

命令模式的定义比较复杂,提到了很多术语,例如“用不同的请求对客户进行参数化”、“对请求排队”,“记录请求日志”、“支持可撤销操作”等,在后面我们将对这些术语进行一一讲解。

命令模式的核心在于引入了命令类,通过命令类来降低发送者和接收者的耦合度,请求发送者只需指定一个命令对象,再通过命令对象来调用请求接收者的处理方法

![](/assets/commandPattern.png)

* Command\(抽象命令类\):抽象命令类一般是一个抽象类或接口,在其中声明了用于执行请求的execute\(\)等方法,通过这些方法可以调用请求接收者的相关操作。

* ConcreteCommand\(具体命令类\):具体命令类是抽象命令类的子类,实现了在抽象命令类中声明的方法,它对应具体的接收者对象,将接收者对象的动作绑定其中。在实现execute\(\)方法时,将调用接收者对象的相关操作\(Action\)。

* Invoker\(调用者\):调用者即请求发送者,它通过命令对象来执行请求。一个调用者并不需要在设计时确定其接收者,因此它只与抽象命令类之间存在关联关系。在程序运行时可以将一个具体命令对象注入其中,再调用具体命令对象的execute\(\)方法,从而实现间接调用请求接收者的相关操作。

* Receiver\(接收者\):接收者执行与请求相关的操作,它具体实现对请求的业务处理。●Receiver\(接收者\):接收者执行与请求相关的操作,它具体实现对请求的业务处理。

命令模式的本质是对请求进行封装,一个请求对应于一个命令,将发出命令的责任和执行命令的责任分割开。每一个命令都是一个操作:请求的一方发出请求要求执行一个操作;接收的一方收到请求,并执行相应的操作。命令模式允许请求的一方和接收的一方独立开来,使得请求的一方不必知道接收请求的一方的接口,更不必知道请求如何被接收、操作是否被执行、何时被执行,以及是怎么被执行的。

命令模式的关键在于引入了抽象命令类编程,只有实现了抽象命令类的具体命令才与请求接收者相关联。

